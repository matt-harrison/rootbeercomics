(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(55)},55:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(22),r=a.n(n),o=a(60),c=a(13),l=a(4),m=a(5),h=a(7),d=a(6),p=a(8),u=a(61),f=a(11),g=a.n(f),w=a(23),v=a.n(w),b=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e;switch(this.props.itemTypeId){default:case 0:e="film";break;case 1:e="book-open";break;case 2:e="book"}return i.a.createElement("form",{id:"addItemForm",onSubmit:this.props.addItem,className:"flex mb5"},i.a.createElement("div",{className:"bdrBox mr5 flex80"},i.a.createElement("div",{className:"flex"},i.a.createElement("input",{type:"text",name:"title",placeholder:"title",value:this.props.title,onChange:this.props.handleItemChange,className:"bdrBox mr5 mb5 bdrGray p5 flex100"}),i.a.createElement("div",{id:"cycleItemTypeButton",onClick:this.props.cycleItemType,className:"flex justifyCenter alignCenter bdrBox bdrGray p5 txtC csrPointer"},i.a.createElement("i",{"aria-hidden":!0,className:"fas fa-"+e+" csrPointer"}))),i.a.createElement("div",{className:"flex"},i.a.createElement("div",{id:"date",className:"flex mr5"},i.a.createElement("div",{className:"mr5 flex33"},i.a.createElement("input",{type:"text",name:"month",maxLength:"2",placeholder:"month",value:this.props.month,onChange:this.props.handleItemChange,className:"bdrBox bdrGray p5 flex100"})),i.a.createElement("div",{className:"mr5 flex33"},i.a.createElement("input",{type:"text",name:"day",maxLength:"2",placeholder:"day",value:this.props.day,onChange:this.props.handleItemChange,className:"bdrBox bdrGray p5 flex100"})),i.a.createElement("div",{className:"flex33"},i.a.createElement("input",{type:"text",name:"year",maxLength:"2",placeholder:"year",value:this.props.year,onChange:this.props.handleItemChange,className:"bdrBox bdrGray p5 flex100"}))),i.a.createElement("div",{id:"toggleItemFirstButton",onClick:this.props.toggleItemIsFirst,className:"flex justifyCenter alignCenter bdrBox bdrGray p5 lineHieght1 csrPointer"},this.props.isFirst?"X":""))),i.a.createElement("button",{type:"submit",id:"addItemButton",className:"bdrBox bdrGray p5 flex20 csrPointer"},"add"))}}]),t}(i.a.PureComponent);a.e(2).then(a.t.bind(null,59,7));var y=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).checkForItems=function(e,t){if(e.length>0){var s=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear().toString().substr(2);a.props.onClick("".concat(i,"/").concat(s,"/").concat(n))}},a.nextMonth=function(){var e=11===a.state.month?0:a.state.month+1,t=11===a.state.month?a.state.year+1:a.state.year;a.setState({month:e,year:t})},a.previousMonth=function(){var e=0===a.state.month?11:a.state.month-1,t=0===a.state.month?a.state.year-1:a.state.year;a.setState({month:e,year:t})};var s=new Date;return a.state={date:s,daysOfTheWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsOfTheYear:["January","February","March","April","May","June","July","August","September","October","November","December"],month:s.getMonth(),year:s.getFullYear()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=new Date(this.state.year,this.state.month+1,0).getDate(),a=new Date(this.state.year,this.state.month,1).getDay(),s=7*(Math.floor((a+t)/7)+1),n=[],r=[],o=[],c=[],l=[];this.props.items.forEach(function(t){var a=t.date.getFullYear(),s=t.date.getMonth();a===e.state.year&&s===e.state.month&&l.push(t)});for(var m=0;m<this.state.daysOfTheWeek.length;m++)n.push(i.a.createElement("div",{className:"day bdrBox mb5 bdrBlack p5 txtC truncate",key:this.state.daysOfTheWeek[m]},this.state.daysOfTheWeek[m]));for(var h=0;h<a;h++)r.push(i.a.createElement("div",{className:"day bdrBox mb5 bdrGray p5",key:"before".concat(h)}));for(var d=function(t){var a=t+1,s=new Date(e.state.year,e.state.month,a),n=[];l.forEach(function(e,t){if(e.date.getDate()===a){var s="book";"comic"===e.type?s="book-open":"movie"===e.type&&(s="film"),n.push(i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-".concat(s),key:t}))}}),c.push(i.a.createElement("div",{className:"day bdrBox mb5 bdrBlack p5 ".concat(n.length>0?"csrPointer":""),key:"day".concat(t),onClick:function(){e.checkForItems(n,s)}},i.a.createElement("p",null,t+1),i.a.createElement("p",null,n)))},p=0;p<t;p++)d(p);for(var u=a+t;u<s;u++)o.push(i.a.createElement("div",{className:"day bdrBox mb5 bdrGray p5",key:"after".concat(u)}));return i.a.createElement("section",{id:"calendar"},i.a.createElement("div",{className:"flex spaceBetween alignCenter bdrBox mb5 bdrBlack p5"},i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fs14 fas fa-chevron-circle-left",onClick:this.previousMonth}),i.a.createElement("p",{className:"mr5"},this.state.monthsOfTheYear[this.state.month]," ",this.state.year),i.a.createElement("i",{"aria-hidden":!0,className:"fs14 fas fa-chevron-circle-right",onClick:this.nextMonth})),i.a.createElement("div",{className:"flex flex-wrap bdrBox"},n,r,c,o))}}]),t}(i.a.PureComponent),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).checkDate=function(e){e.target.value.length<8&&a.props.clearDate(e)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.isAsc?"fa-caret-square-up":"fa-caret-square-down",t=this.props.showBooks?"":"txtRed",a=this.props.showComics?"":"txtRed",s=this.props.showMovies?"":"txtRed",n=this.props.showDate?"":"txtRed",r=this.props.showDuplicates?"":"txtRed";return i.a.createElement("div",{className:"flex flex-col m-flex-row spaceBetween alignCenter mb5 fs14"},i.a.createElement("div",{className:"flex alignCenter mr5 mb5 m-mb0 flex100 m-flex1"},i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas ".concat(t," fa-book csrPointer"),onClick:this.props.toggleShowBooks}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas ".concat(a," fa-book-open csrPointer"),onClick:this.props.toggleShowComics}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas ".concat(s," fa-film csrPointer"),onClick:this.props.toggleShowMovies}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 far ".concat(n," fa-calendar csrPointer"),onClick:this.props.toggleShowDate}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas ".concat(r," fa-clone csrPointer"),onClick:this.props.toggleShowDuplicates}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas ".concat(e," csrPointer"),onClick:this.props.toggleIsAsc})),i.a.createElement("div",{className:"flex flex100 m-flex1"},i.a.createElement("div",{className:"mr5 flex33 m-w100"},i.a.createElement("input",{className:"bdrBox bdrBlack p5 flex100",id:"dateStart",name:"dateStart",onBlur:this.checkDate,onChange:this.props.filterDate,onClick:this.props.clearDate,placeholder:"from: mmddyy",value:this.props.dateStart})),i.a.createElement("div",{className:"mr5 flex33 m-w100"},i.a.createElement("input",{className:"bdrBox bdrBlack p5 flex100",id:"dateEnd",name:"dateEnd",onBlur:this.checkDate,onChange:this.props.filterDate,onClick:this.props.clearDate,placeholder:"to: mmddyy",value:this.props.dateEnd})),i.a.createElement("div",{className:"flex33 m-w100"},i.a.createElement("input",{className:"bdrBox bdrBlack p5 flex100",name:"title",onChange:this.props.filterTitle,placeholder:"title",value:this.props.title}))))}}]),t}(i.a.PureComponent),k=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.itemsFiltered.slice();return this.props.isAsc||t.reverse(),t=(t=t.map(function(a,s){var n,r=(a.date.getMonth()+1).toString().padStart(2,"0"),o=a.date.getDate().toString().padStart(2,"0"),c=a.date.getFullYear().toString().substr(2),l=a.isFirst?a.title:"[".concat(a.title,"]"),m=e.props.isAsc?s+1:t.length-s,h=e.props.showDate?" (".concat(r,"/").concat(o,"/").concat(c,")"):"";switch(a.type){default:case"book":n=i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-book"});break;case"comic":n=i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-book-open"});break;case"movie":n=i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-film"})}return i.a.createElement("div",{key:s},m,". ",n,l,h)})).length>0?t:i.a.createElement("div",null,"..."),i.a.createElement("section",{id:"items",className:"bdrBox bdrBlack p5"},t)}}]),t}(i.a.PureComponent),E=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{id:"signInForm",onSubmit:this.props.signIn,className:"flex mb5"},i.a.createElement("div",{className:"flex bdrBox mr5 flex80"},i.a.createElement("div",{className:"mr5 flex50"},i.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.props.username,onChange:this.props.handleInputChange,className:"bdrBox bdrGray p5 flex100"})),i.a.createElement("div",{className:"flex50"},i.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.props.password,onChange:this.props.handleInputChange,className:"bdrBox bdrGray p5 flex100"}))),i.a.createElement("button",{type:"submit",className:"bdrBox bdrGray p5 flex20 csrPointer"},"sign in"))}}]),t}(i.a.PureComponent);a.e(1).then(a.t.bind(null,58,7));var x=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).addItem=function(e){e.preventDefault();var t={username:a.state.user.name,md5:a.state.user.md5,item:{date:a.state.item.year+"-"+a.state.item.month+"-"+a.state.item.day,isFirst:a.state.item.isFirst,title:a.state.item.title,type:a.state.itemTypes[a.state.itemTypeId]}};g.a.get("https://www.rootbeercomics.com/scripts/list/insert.php",{params:{data:t}}).then(function(e){if(e.data.success){var t=a.state.item;t.title="",a.setState({item:t}),a.getItems()}})},a.clearDate=function(e){a.setState(Object(c.a)({},e.target.name,""),a.setItemsFiltered)},a.convertDate=function(e){var t=new Date(e.substr(0,10));return t.setHours(t.getHours()+a.state.timezoneOffset),t},a.cycleItemType=function(){var e=a.state.itemTypeId+1>=a.state.itemTypes.length?0:a.state.itemTypeId+1;a.setState({itemTypeId:e})},a.filterDate=function(e){var t=e.target.value.match(/\d/g);(t=t?t.slice(0,6).join(""):"").length>4&&(t=t.slice(0,4)+"/"+t.slice(4)),t.length>2&&(t=t.slice(0,2)+"/"+t.slice(2)),a.setState(Object(c.a)({},e.target.name,t),a.setItemsFiltered)},a.filterItems=function(e){if(8===a.state.dateStart.length){var t=new Date(a.state.dateStart);e=e.filter(function(e){return e.date>=t})}if(8===a.state.dateEnd.length){var s=new Date(a.state.dateEnd);e=e.filter(function(e){return e.date<=s})}return a.state.showDuplicates||(e=e.filter(function(e){return e.isFirst})),a.state.showBooks||(e=e.filter(function(e){return"book"!==e.type})),a.state.showComics||(e=e.filter(function(e){return"comic"!==e.type})),a.state.showMovies||(e=e.filter(function(e){return"movie"!==e.type})),a.state.title&&(e=e.filter(function(e){return e.title.indexOf(a.state.title)>-1})),e},a.filterTitle=function(e){a.setState({title:e.target.value},a.setItemsFiltered)},a.getCookie=function(){var e=document.cookie.split("; "),t={isAdmin:!1,isSignedIn:!1,md5:null,name:null};return e.forEach(function(e){var a=e.split("="),s=a[0],i=a[1];"user"===s&&""!==i&&(t=JSON.parse(decodeURIComponent(i)))}),t},a.getHeading=function(){var e="entertainment matt has consumed";return!a.state.showBooks||a.state.showComics||a.state.showMovies?!a.state.showComics||a.state.showBooks||a.state.showMovies?!a.state.showMovies||a.state.showBooks||a.state.showComics?a.state.showBooks&&a.state.showComics&&!a.state.showMovies&&(e="books and comics matt has read"):e="movies matt has seen":e="comics matt has read":e="books matt has read",e},a.getItems=function(){g.a.get("https://www.rootbeercomics.com/scripts/list/get.php").then(function(e){var t=e.data.items.map(function(e){return e.isFirst="1"===e.isFirst,e.date=a.convertDate(e.date),e});a.setState({itemsFiltered:a.filterItems(t),items:t})})},a.handleInputChange=function(e){var t=a.state.input;t[e.target.name]=e.target.value,a.setState({input:t})},a.handleItemChange=function(e){var t=a.state.item;t[e.target.name]=e.target.value,a.setState({item:t})},a.parsePath=function(){var e=window.location.search.substr(1).split("&").filter(function(e){return e}),t={isAsc:!1,dateStart:"",dateEnd:"",showBooks:!0,showComics:!0,showDate:!0,showDuplicates:!0,showFilters:e.length>0,showMovies:!0,title:""};return e.forEach(function(e){"asc"===e?t.isAsc=!0:"no-books"===e?t.showBooks=!1:"no-comics"===e?t.showComics=!1:"no-date"===e?t.showDate=!1:"no-dupes"===e?t.showDuplicates=!1:"no-movies"===e?t.showMovies=!1:"start:"===e.substr(0,6)?t.dateStart=e.substr(6).replace(/\./g,"/"):"end:"===e.substr(0,4)?t.dateEnd=e.substr(4).replace(/\./g,"/"):"title:"===e.substr(0,6)&&(t.title=e.substr(6))}),t},a.setCookie=function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";"undefined"===typeof a&&(a=new Date).setHours(a.getHours()+24),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(a,"; path=").concat(s)},a.setDate=function(e){a.setState({dateEnd:e,dateStart:e,showFilters:!0},a.setItemsFiltered)},a.setItemsFiltered=function(){var e=a.state.items.slice();a.setPath(),a.setState({itemsFiltered:a.filterItems(e)})},a.setPath=function(){var e=[];if(a.state.isAsc&&e.push("asc"),a.state.showBooks||e.push("no-books"),a.state.showComics||e.push("no-comics"),a.state.showMovies||e.push("no-movies"),a.state.showDate||e.push("no-date"),a.state.showDuplicates||e.push("no-dupes"),8===a.state.dateStart.length){var t=a.state.dateStart.replace(/[\/-]/g,".");e.push("start:"+t)}if(8===a.state.dateEnd.length){var s=a.state.dateEnd.replace(/[\/-]/g,".");e.push("end:"+s)}""!==a.state.title&&e.push("title:"+a.state.title),a.props.history.push("?"+e.join("&"))},a.signIn=function(e){e.preventDefault();var t=v()(a.state.input.username+a.state.input.password),s={username:a.state.input.username,md5:t};g.a.get("https://www.rootbeercomics.com/login/ajax/index.php",{params:s}).then(function(e){if(e.data.success){var t={isAdmin:"matt!"===s.username,isSignedIn:!0,md5:s.md5,name:s.username};a.setState({showSignInForm:!1,user:t}),a.setCookie("user",JSON.stringify(a.state.user))}else{var i={username:a.state.input.username,password:""};a.setState({input:i})}})},a.signOut=function(){var e={isAdmin:!1,isSignedIn:!1,md5:"",name:""};g.a.get("https://www.rootbeercomics.com/login/ajax/log-out.php").then(function(t){a.setState({showAddItemForm:!1,user:e}),a.setCookie("user","")})},a.toggleCalendar=function(){var e=!a.state.showCalendar;a.setState({dateEnd:"",dateStart:"",showCalendar:e},a.setItemsFiltered)},a.toggleFilter=function(){var e=!a.state.showFilters;a.setState({showFilters:e})},a.toggleIsAsc=function(){a.setState({isAsc:!a.state.isAsc},a.setPath)},a.toggleItemIsFirst=function(){var e=a.state.item;e.isFirst=!e.isFirst,a.setState({item:e})},a.toggleShowAddItemForm=function(){a.setState({showAddItemForm:!a.state.showAddItemForm})},a.toggleShowBooks=function(){a.setState({showBooks:!a.state.showBooks},a.setItemsFiltered)},a.toggleShowComics=function(){a.setState({showComics:!a.state.showComics},a.setItemsFiltered)},a.toggleShowDate=function(){a.setState({showDate:!a.state.showDate},a.setItemsFiltered)},a.toggleShowDuplicates=function(){a.setState({showDuplicates:!a.state.showDuplicates},a.setItemsFiltered)},a.toggleShowMovies=function(){a.setState({showMovies:!a.state.showMovies},a.setItemsFiltered)},a.toggleShowSignInForm=function(){a.setState({showSignInForm:!a.state.showSignInForm})};var s=a.parsePath(),i=new Date;return a.state={dateEnd:s.dateEnd||"",dateStart:s.dateStart||"",input:{username:"",password:""},isAsc:s.isAsc||!1,item:{day:i.getDate().toString().padStart(2,"0"),isFirst:!0,month:(i.getMonth()+1).toString().padStart(2,"0"),title:"",type:"movie",year:i.getFullYear()},items:[],itemsFiltered:[],itemTypeId:0,itemTypes:["movie","comic","book"],showAddItemForm:!1,showBooks:s.showBooks,showCalendar:!1,showComics:s.showComics,showDate:s.showDate,showDuplicates:s.showDuplicates,showFilters:s.showFilters,showList:!0,showMovies:s.showMovies,showSignInForm:!1,timezoneOffset:i.getTimezoneOffset()/60,title:s.title,user:a.getCookie()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getItems()}},{key:"render",value:function(){var e=this.state.user.isAdmin?i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-edit ".concat(this.state.showAddItemForm?"":"txtRed"," csrPointer"),onClick:this.toggleShowAddItemForm}):null,t=this.state.user.isSignedIn?i.a.createElement("i",{"aria-hidden":!0,className:"fas fa-sign-out-alt csrPointer",onClick:this.signOut}):i.a.createElement("i",{"aria-hidden":!0,className:"fas fa-sign-in-alt csrPointer",onClick:this.toggleShowSignInForm});return i.a.createElement("div",{className:"mAuto w600"},i.a.createElement("div",{className:"flex spaceBetween alignCenter mb5 fs14"},i.a.createElement("p",{className:"mr5 bold"},this.getHeading()),i.a.createElement("div",{className:"flex"},e,i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-calendar ".concat(this.state.showCalendar?"":"txtRed"," csrPointer"),onClick:this.toggleCalendar}),i.a.createElement("i",{"aria-hidden":!0,className:"mr5 fas fa-filter ".concat(this.state.showFilters?"":"txtRed"," csrPointer"),onClick:this.toggleFilter}),t)),this.state.user.isSignedIn&&this.state.showAddItemForm&&i.a.createElement(b,{addItem:this.addItem,cycleItemType:this.cycleItemType,day:this.state.item.day,isFirst:this.state.item.isFirst,itemTypeId:this.state.itemTypeId,handleItemChange:this.handleItemChange,month:this.state.item.month,title:this.state.item.title,toggleItemIsFirst:this.toggleItemIsFirst,year:this.state.item.year}),this.state.showSignInForm&&i.a.createElement(E,{signIn:this.signIn,username:this.state.input.username,password:this.state.input.password,handleInputChange:this.handleInputChange}),this.state.showCalendar&&i.a.createElement(y,{items:this.state.items,onClick:this.setDate}),this.state.showFilters&&i.a.createElement(S,{dateEnd:this.state.dateEnd,dateStart:this.state.dateStart,clearDate:this.clearDate,filterDate:this.filterDate,filterTitle:this.filterTitle,isAsc:this.state.isAsc,params:this.state.params,showBooks:this.state.showBooks,showDate:this.state.showDate,showDuplicates:this.state.showDuplicates,showComics:this.state.showComics,showMovies:this.state.showMovies,title:this.state.title,toggleIsAsc:this.toggleIsAsc,toggleShowBooks:this.toggleShowBooks,toggleShowComics:this.toggleShowComics,toggleShowDuplicates:this.toggleShowDuplicates,toggleShowMovies:this.toggleShowMovies,toggleShowDate:this.toggleShowDate}),this.state.showList&&i.a.createElement(k,{isAsc:this.state.isAsc,itemsFiltered:this.state.itemsFiltered,showDate:this.state.showDate}))}}]),t}(s.Component),I=Object(u.a)(x);r.a.render(i.a.createElement(o.a,null,i.a.createElement(I,null)),document.getElementById("root"))}},[[27,4,3]]]);
//# sourceMappingURL=main.d1c43a58.chunk.js.map